# PayPay CSV Optimizer for MoneyForward ME

PayPayからエクスポートした取引履歴CSVを、MoneyForward MEへインポートするために最適化するWebアプリケーションです。

## 概要

PayPayのCSVはそのままではMoneyForward MEにインポートできません。特に、残高払いとポイント払いを組み合わせた「併用払い」は1つの取引として記録されているため、手動での修正が必要です。

このツールは、以下の処理をブラウザ上で完結させることで、その手間を解消します。

- **併用払いの分割**: 1つの行に記録された複数の支払い方法を、個別の取引行に分割します。
- **支払い方法ごとのファイル生成**: 「PayPay残高」「PayPayポイント」などの支払い方法ごとに、個別のCSVファイルを生成します。
- **件数制限への対応**: MoneyForward MEの1インポートあたり100件の制限に対応するため、100件を超えるファイルは自動的に分割します。

全ての処理はブラウザ内で行われるため、取引履歴データが外部のサーバーに送信されることはありません。

## 主な機能

- **動的な支払い方法の識別**: 「PayPay残高」「PayPayポイント」などのキーワードに依存せず、CSV内の情報から動的に支払い方法を識別し、ファイルを出力します。
- **既存取引の自動除外**: MoneyForward MEからエクスポートしたCSVファイルを一緒に読み込ませることで、既に取り込み済みの取引を自動で処理対象から除外します。
- **ファイル分割**: 1つの支払い方法で100件を超える取引がある場合、自動でファイルを100件ずつのチャンクに分割して出力します。
- **Web Share API対応**: スマートフォンのブラウザでは「共有」機能が利用でき、生成したCSVファイルを直接MoneyForward MEアプリに渡してインポートできます。PCブラウザでは通常のダウンロードとして動作します。
- **プライバシー**: ファイルの処理はすべてクライアントサイドのJavaScriptで完結します。

## 使い方

1.  **PayPayの取引履歴をエクスポート**: PayPayアプリの「取引履歴」からCSVファイルをエクスポートします。
2.  **（任意）MoneyForward MEの取引履歴を準備**: 既に取り込み済みの取引を除外したい場合は、MoneyForward MEから取引履歴CSVをエクスポートしておきます。
3.  **ファイルアップロード**:
    - **PayPay取引履歴**: 「PayPayのCSVファイル」の選択ボタンから、1でエクスポートしたファイルをアップロードします。
    - **（任意）MoneyForward ME取引履歴**: 2で準備したファイルを「MoneyForward MEのCSVファイル（任意）」の選択ボタンからアップロードします。
4.  **処理を実行**: 「処理を実行」ボタンをクリックします。
5.  **ファイルをインポート**: 支払い方法ごとにファイルが生成されます。各ファイルの「共有 / 保存」ボタンを使い、MoneyForward MEにデータをインポートします。

## 開発

### セットアップ

```bash
# 依存関係をインストール
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

## 使用技術

- React
- TypeScript
- Vite
- Tailwind CSS
- csv-parse / csv-stringify
